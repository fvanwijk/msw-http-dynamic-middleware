"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,r=(e=require("pino"))&&"object"==typeof e&&"default"in e?e.default:e,t=require("msw"),n=r({prettyPrint:{translateTime:!0,ignore:"pid,hostname"}}),a=function(e,r,t){return r(t.status(200))},o=function(e){if(e instanceof RegExp)throw new Error("Only strings as path are supported");return!0},s=function(e,r,t){var a=e[r];if(!a)throw new Error('Scenario "'+r+'" does not exist');var s=(Array.isArray(a)?a:[a]).map((function(e){var r=e.info,n=r.path,a=r.method,s=r.header;if(o(n))return n in t||(t[n]={}),t[n][a]=e.resolver,s}));n.info('Set scenario "'+r+'" with resolvers for endpoints: '+s.join(", "))};exports.createHandlers=function(e,r){var i={};return r&&s(e,r,i),[].concat(Object.values(e).flatMap((function(e){return(Array.isArray(e)?e:[e]).map((function(e){var r=e.info,s=r.method,u=r.path,f=r.header;return o(u),t.rest[s.toLowerCase()](u,(function(e,r,t){if(o(u)){var c,l=null==(c=i[u])?void 0:c[s];return l?n.info(f):(l=a,n.info(f+" (default resolver)")),l(e,r,t)}}))}))})),[t.rest.put("/scenario",(function(r,t,n){var a,o=null==(a=r.body)?void 0:a.scenario;if(!o)return t(n.status(400),n.text('Please provide a scenario name in the request body. Example: { "scenario": "user success" }'));try{s(e,o,i)}catch(e){t(n.status(400),n.text(e.message))}return t(n.status(205))})),t.rest.delete("/scenario",(function(t,a,o){i={};var u=t.url.searchParams.get("resetAll");return r&&"true"!==(null==u?void 0:u.toLowerCase())?(n.info("Reset server to default scenario"),s(e,r,i)):n.info("Reset all handlers to default resolver"),a(o.status(205))}))])};
//# sourceMappingURL=msw-dynamic-http-middleware.cjs.production.min.js.map
